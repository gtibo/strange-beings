<script>
  export let parts = [];
  let images = [];
  import {onMount} from "svelte";
  let loading = true;
  onMount(()=>{

    let images_load_promises = images.map(img=>{
      return new Promise((res, reject)=>{
        img.onload = res;
        img.onerror = reject;
      });
    });
    Promise.all(images_load_promises).then(()=>{
      // All parts loaded...
      loading = false;
    });

  });


  let part_width = 640,
      part_height = 370;


</script>
<div class="card">
  <svg viewBox="0 0 640 32" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M18 0V8.25204C21.4505 9.14012 24 12.2723 24 16C24 20.4183 20.4183 24 16 24C11.5817 24 8 20.4183 8 16C8 12.2723 10.5495 9.14012 14 8.25204V0H0V32H640V0H626V8.25204C629.45 9.14012 632 12.2723 632 16C632 20.4183 628.418 24 624 24C619.582 24 616 20.4183 616 16C616 12.2723 618.55 9.14012 622 8.25204V0H594V8.25204C597.45 9.14012 600 12.2723 600 16C600 20.4183 596.418 24 592 24C587.582 24 584 20.4183 584 16C584 12.2723 586.55 9.14012 590 8.25204V0H562V8.25204C565.45 9.14012 568 12.2723 568 16C568 20.4183 564.418 24 560 24C555.582 24 552 20.4183 552 16C552 12.2723 554.55 9.14012 558 8.25204V0H530V8.25204C533.45 9.14012 536 12.2723 536 16C536 20.4183 532.418 24 528 24C523.582 24 520 20.4183 520 16C520 12.2723 522.55 9.14012 526 8.25204V0H498V8.25204C501.45 9.14012 504 12.2723 504 16C504 20.4183 500.418 24 496 24C491.582 24 488 20.4183 488 16C488 12.2723 490.55 9.14012 494 8.25204V0H466V8.25204C469.45 9.14012 472 12.2723 472 16C472 20.4183 468.418 24 464 24C459.582 24 456 20.4183 456 16C456 12.2723 458.55 9.14012 462 8.25204V0H434V8.25204C437.45 9.14012 440 12.2723 440 16C440 20.4183 436.418 24 432 24C427.582 24 424 20.4183 424 16C424 12.2723 426.55 9.14012 430 8.25204V0H402V8.25204C405.45 9.14012 408 12.2723 408 16C408 20.4183 404.418 24 400 24C395.582 24 392 20.4183 392 16C392 12.2723 394.55 9.14012 398 8.25204V0H370V8.25204C373.45 9.14012 376 12.2723 376 16C376 20.4183 372.418 24 368 24C363.582 24 360 20.4183 360 16C360 12.2723 362.55 9.14012 366 8.25204V0H338V8.25204C341.45 9.14012 344 12.2723 344 16C344 20.4183 340.418 24 336 24C331.582 24 328 20.4183 328 16C328 12.2723 330.55 9.14012 334 8.25204V0H306V8.25204C309.45 9.14012 312 12.2723 312 16C312 20.4183 308.418 24 304 24C299.582 24 296 20.4183 296 16C296 12.2723 298.55 9.14012 302 8.25204V0H274V8.25204C277.45 9.14012 280 12.2723 280 16C280 20.4183 276.418 24 272 24C267.582 24 264 20.4183 264 16C264 12.2723 266.55 9.14012 270 8.25204V0H242V8.25204C245.45 9.14012 248 12.2723 248 16C248 20.4183 244.418 24 240 24C235.582 24 232 20.4183 232 16C232 12.2723 234.55 9.14012 238 8.25204V0H210V8.25204C213.45 9.14012 216 12.2723 216 16C216 20.4183 212.418 24 208 24C203.582 24 200 20.4183 200 16C200 12.2723 202.55 9.14012 206 8.25204V0H178V8.25204C181.45 9.14012 184 12.2723 184 16C184 20.4183 180.418 24 176 24C171.582 24 168 20.4183 168 16C168 12.2723 170.55 9.14012 174 8.25204V0H146V8.25204C149.45 9.14012 152 12.2723 152 16C152 20.4183 148.418 24 144 24C139.582 24 136 20.4183 136 16C136 12.2723 138.55 9.14012 142 8.25204V0H114V8.25204C117.45 9.14012 120 12.2723 120 16C120 20.4183 116.418 24 112 24C107.582 24 104 20.4183 104 16C104 12.2723 106.55 9.14012 110 8.25204V0H82V8.25204C85.4505 9.14012 88 12.2723 88 16C88 20.4183 84.4183 24 80 24C75.5817 24 72 20.4183 72 16C72 12.2723 74.5495 9.14012 78 8.25204V0H50V8.25204C53.4505 9.14012 56 12.2723 56 16C56 20.4183 52.4183 24 48 24C43.5817 24 40 20.4183 40 16C40 12.2723 42.5495 9.14012 46 8.25204V0H18Z" fill="white"/>
  </svg>
  <div class="boo select-none bg-white rounded-b-xs" class:hide={loading}>
    {#each parts as part, i}
    <img
    bind:this={images[i]}
    width={part_width}
    height={part_height}
    class="w-full h-auto mix-blend-multiply pointer-events-none"
    src="{part}"
    />
    {/each}
  </div>
</div>
<style>

.card{
  @apply drop-shadow-sm rounded-sm;
}

.boo img{
  transition:all 0.2s;
  opacity: 1;
}

.boo.hide img{
  opacity: 0;
}

</style>
